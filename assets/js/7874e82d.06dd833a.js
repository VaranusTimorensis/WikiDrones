"use strict";(self.webpackChunkwikidrones=self.webpackChunkwikidrones||[]).push([[2566],{7276:(e,s,o)=>{o.r(s),o.d(s,{assets:()=>l,contentTitle:()=>a,default:()=>m,frontMatter:()=>i,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"commandes_de_vol/Contr\xf4le direct des moteurs","title":"Contr\xf4le direct des moteurs","description":"Piloter en contr\xf4lant la puissance des moteurs","source":"@site/docs/commandes_de_vol/Contr\xf4le direct des moteurs.md","sourceDirName":"commandes_de_vol","slug":"/commandes_de_vol/Contr\xf4le direct des moteurs","permalink":"/WikiDrones/docs/commandes_de_vol/Contr\xf4le direct des moteurs","draft":false,"unlisted":false,"editUrl":"https://github.com/VaranusTimorensis/WikiDrones/docs/commandes_de_vol/Contr\xf4le direct des moteurs.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8},"sidebar":"tutorialSidebar","previous":{"title":"Mode ACRO","permalink":"/WikiDrones/docs/commandes_de_vol/Mode ACRO"},"next":{"title":"Interagir avec des capteurs","permalink":"/WikiDrones/docs/category/interagir-avec-des-capteurs"}}');var n=o(4848),r=o(8453);const i={sidebar_position:8},a=void 0,l={},d=[{value:"Piloter en contr\xf4lant la puissance des moteurs",id:"piloter-en-contr\xf4lant-la-puissance-des-moteurs",level:3},{value:"Messages OffboardControlMode",id:"messages-offboardcontrolmode",level:4},{value:"Publier les puissances des moteurs",id:"publier-les-puissances-des-moteurs",level:4},{value:"Message UORB",id:"message-uorb",level:4}];function c(e){const s={code:"code",h3:"h3",h4:"h4",pre:"pre",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.h3,{id:"piloter-en-contr\xf4lant-la-puissance-des-moteurs",children:"Piloter en contr\xf4lant la puissance des moteurs"}),"\n",(0,n.jsx)(s.h4,{id:"messages-offboardcontrolmode",children:"Messages OffboardControlMode"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-python",children:"def publish_offboard_mode(self):\n    msg = OffboardControlMode()\n    msg.position = False\n    msg.velocity = False\n    msg.acceleration = False\n    msg.attitude = False\n    msg.body_rate = False\n    msg.thrust_and_torque = False\n    msg.direct_actuator = True\n    msg.timestamp = int(time.time() * 1e6)\n    self.offboard_ctrl_pub.publish(msg)\n    self.get_logger().info('OffboardControlMode publi\xe9')\n"})}),"\n",(0,n.jsx)(s.h4,{id:"publier-les-puissances-des-moteurs",children:"Publier les puissances des moteurs"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-python",children:"def publish_motors(self, motors_control):\n    motors = ActuatorMotors()\n    motors.control = motors_control\n    self.actuator_pub.publish(motors)\n    self.get_logger().info(f'ActuatorMotors publi\xe9: {motors_control}')\n"})}),"\n",(0,n.jsx)(s.h4,{id:"message-uorb",children:"Message UORB"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{children:"# Motor control message\n#\n# Normalised thrust setpoint for up to 12 motors.\n# Published by the vehicle's allocation and consumed by the ESC protocol drivers e.g. PWM, DSHOT, UAVCAN.\n\nuint32 MESSAGE_VERSION = 0\n\nuint64 timestamp # [us] Time since system start\nuint64 timestamp_sample # [us] Sampling timestamp of the data this control response is based on\n\nuint16 reversible_flags # Bitset indicating which motors are configured to be reversible\n\nuint8 ACTUATOR_FUNCTION_MOTOR1 = 101\n\nuint8 NUM_CONTROLS = 12\nfloat32[12] control # [@range -1, 1] Normalized thrust. where 1 means maximum positive thrust, -1 maximum negative (if not supported by the output, <0 maps to NaN). NaN maps to disarmed (stop the motors)\n"})})]})}function m(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},8453:(e,s,o)=>{o.d(s,{R:()=>i,x:()=>a});var t=o(6540);const n={},r=t.createContext(n);function i(e){const s=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),t.createElement(r.Provider,{value:s},e.children)}}}]);