"use strict";(self.webpackChunkwikidrones=self.webpackChunkwikidrones||[]).push([[3696],{3325:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>i,contentTitle:()=>d,default:()=>m,frontMatter:()=>a,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"commandes_de_vol/Le mode Offboard","title":"Le mode Offboard","description":"Le mode Offboard","source":"@site/docs/commandes_de_vol/Le mode Offboard.md","sourceDirName":"commandes_de_vol","slug":"/commandes_de_vol/Le mode Offboard","permalink":"/WikiDrones/docs/commandes_de_vol/Le mode Offboard","draft":false,"unlisted":false,"editUrl":"https://github.com/VaranusTimorensis/WikiDrones/docs/commandes_de_vol/Le mode Offboard.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Message VehicleCommand","permalink":"/WikiDrones/docs/commandes_de_vol/Message VehicleCommand"},"next":{"title":"Armer et d\xe9sarmer","permalink":"/WikiDrones/docs/commandes_de_vol/Armer et d\xe9sarmer"}}');var t=n(4848),r=n(8453);const a={sidebar_position:3},d=void 0,i={},l=[{value:"Le mode Offboard",id:"le-mode-offboard",level:3},{value:"Message UORB",id:"message-uorb",level:3}];function c(e){const o={code:"code",h3:"h3",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.h3,{id:"le-mode-offboard",children:"Le mode Offboard"}),"\n",(0,t.jsxs)(o.p,{children:["Le passage en mode Offboard se fait par la m\xe9thode ",(0,t.jsx)(o.code,{children:"engage_offboard_mode"})," report\xe9e ci-dessous :"]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-python",children:'def engage_offboard_mode(self):\n    """Switch to offboard mode."""\n    self.publish_vehicle_command(\n        VehicleCommand.VEHICLE_CMD_DO_SET_MODE, param1=1.0, param2=6.0)\n    self.get_logger().info("Switching to offboard mode")\n'})}),"\n",(0,t.jsxs)(o.p,{children:["Une fois le mode Offboard engag\xe9, il faut publier \xe0 une fr\xe9quence suffisante (?) un message Offboard afin de se maintenir dans le mode. C'est ce qui est fait par la m\xe9thode ",(0,t.jsx)(o.code,{children:"publish_offboard_control_heartbeat_signal"})," :"]}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{className:"language-python",children:'def publish_offboard_control_heartbeat_signal(self):\n    """Publish the offboard control mode."""\n    msg = OffboardControlMode()\n    msg.position = True\n    msg.velocity = False\n    msg.acceleration = False\n    msg.attitude = False\n    msg.body_rate = False\n    msg.timestamp = int(self.get_clock().now().nanoseconds / 1000)\n    self.offboard_control_mode_publisher.publish(msg)\n'})}),"\n",(0,t.jsx)(o.p,{children:"Cette commande pr\xe9cise comment le dr\xf4ne est contr\xf4l\xe9 : en position, en vitesse, en acc\xe9l\xe9ration, etc."}),"\n",(0,t.jsx)(o.h3,{id:"message-uorb",children:"Message UORB"}),"\n",(0,t.jsx)(o.pre,{children:(0,t.jsx)(o.code,{children:"# Off-board control mode\n\nuint64 timestamp\t\t# time since system start (microseconds)\n\nbool position\nbool velocity\nbool acceleration\nbool attitude\nbool body_rate\nbool thrust_and_torque\nbool direct_actuator\n"})})]})}function m(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,t.jsx)(o,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,o,n)=>{n.d(o,{R:()=>a,x:()=>d});var s=n(6540);const t={},r=s.createContext(t);function a(e){const o=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(o):{...o,...e}},[o,e])}function d(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(r.Provider,{value:o},e.children)}}}]);